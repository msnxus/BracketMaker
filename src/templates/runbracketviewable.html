<head>
  <title>Bracket</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='bracketstyle.css') }}">

  <style>
    input[type="text"] {
      background-color: transparent;
      width: auto;
      padding: 0;
      margin: 0;
      font-size: inherit;
      max-width: 30px;
      border-color:black;
      border-width: 2px;
    }

    div {
      display: inline-block; /* to make the div only take up as much width as necessary */
    }

    button {
      display: block; /* to make the button a block element, causing it to appear on a new line */
      margin-top: 5px; /* adjust the margin as needed to space it below the input */
    }
  </style>

  <div name="{{code}}" id="code"></div>
</head>
<body>


<main id="tournament">


  {% for round in range(rounds - 1)%}
  <ul class="round round-{{ round + 1}}">
    <li class="spacer">&nbsp;</li>
    {% for index in range(round_indicies[round][0], round_indicies[round][1])%}
    {% if (index % 2) != 0%}
    <li class="game game-top ">{{bracket_list[index][0]}} <span>
      <div>
        <input type="text" value="{{bracket_list[index][1]}}" id="{{index}}">
      </div>
  </span></li>
    <li class="game game-spacer">&nbsp; <span> <button type="submit">Submit</button></span></li>
    <li class="game game-bottom ">{{bracket_list[index + 1][0]}}<span><input type="text" value="{{bracket_list[index + 1][1]}}" id="{{index + 1}}"></span></li></li>


    <li class="spacer">&nbsp;</li>
    {% endif%}
    {% endfor %}
  </ul>
  {% endfor %}
 
</main>



<script>
  // Get all buttons
const buttons = document.querySelectorAll('button');

// Add click event listener to each button, could individu
buttons.forEach(button => {
  button.addEventListener('click', () => {
    // Get the index from the button's name attribute
    const index_of_first_player = button.getAttribute('name');

    // Find the corresponding scores
    const input1 = document.getElementById(index);
    const input2 = document.getElementById(String(Number(index) + 1));
    const codeDiv = document.getElementById("code")
    const code = codeDiv.getAttribute('name')


    const score1 = input1.value;
    const score2 = input2.value;

    const scores = [score1, score2]
    
    data = {
      "index": index_of_first_player,
      "scores": scores,
      "code": code
    }

    //As you will
  });
});

</script>
</body>